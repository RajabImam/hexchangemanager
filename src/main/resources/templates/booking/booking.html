<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../css/bootstrap.min.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
            />
        <link rel="stylesheet" href="../css/dataTables.bootstrap5.min.css" />
        <link rel="stylesheet" href="../css/style.css" />
        <title>Home Exchange Manager</title>
    </head>
    <body>
        <!-- top navigation bar -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
            <div class="container-fluid">
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="offcanvas"
                    data-bs-target="#sidebar"
                    aria-controls="offcanvasExample"
                    >
                    <span class="navbar-toggler-icon" data-bs-target="#sidebar"></span>
                </button>
                <a
                    class="navbar-brand me-auto ms-lg-0 ms-3 text-uppercase fw-bold"
                    href="#"
                    >Home Exchange Manager</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#topNavBar"
                    aria-controls="topNavBar"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                    >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="topNavBar">
                    <form class="d-flex ms-auto my-3 my-lg-0">
                        <div class="input-group">
                            <input
                                class="form-control"
                                type="search"
                                placeholder="Search"
                                aria-label="Search"
                                />
                            <button class="btn btn-primary" type="submit">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </form>
                    <span class="text-white" th:text="${#authentication.getPrincipal().getUsername()}"></span>
                    <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle ms-2"
                                href="#"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                                >
                                <i class="bi bi-person-fill"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="/user_profile">Profile</a></li>
                                <li><a class="dropdown-item" href="/user_profile">Account Settings</a></li>
                                <li><a class="dropdown-item" href="#">Messages</a></li>
                                <li>
                                    <form method="post" th:action="@{/logout}" class="form-inline">
                                        <input class="form-control" type="hidden" />
                                        <button class="dropdown-item" type="submit">Logout</button>
                                    </form>

                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- top navigation bar -->
        <!-- offcanvas -->
        <div
            class="offcanvas offcanvas-start sidebar-nav bg-dark"
            tabindex="-1"
            id="sidebar"
            >
            <div class="offcanvas-body p-0">
                <nav class="navbar-dark">
                    <ul class="navbar-nav">

                        <li>
                            <a href="/dashboard" class="nav-link px-3 active">
                                <span class="me-2"><i class="bi bi-speedometer2"></i></span>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <!--House Management Module-->
                        <li>
                            <a
                                class="nav-link px-3 sidebar-link"
                                data-bs-toggle="collapse"
                                href="#house"
                                >
                                <span class="me-2"><i class="bi bi-layout-split"></i></span>
                                <span>House</span>
                                <span class="ms-auto">
                                    <span class="right-icon">
                                        <i class="bi bi-chevron-down"></i>
                                    </span>
                                </span>
                            </a>
                            <div class="collapse" id="house">
                                <ul class="navbar-nav ps-3">
                                    <li>
                                        <a href="/add_house" class="nav-link px-3">
                                            <span class="me-2"
                                                  ><i class="bi bi-speedometer2"></i
                                                ></span>
                                            <span>Add House</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="nav-link px-3">
                                            <span class="me-2"
                                                  ><i class="bi bi-speedometer2"></i
                                                ></span>
                                            <span>House Details</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <!--Booking Module-->
                        <li>
                            <a
                                class="nav-link px-3 sidebar-link"
                                data-bs-toggle="collapse"
                                href="#booking"
                                >
                                <span class="me-2"><i class="bi bi-book-fill"></i></span>
                                <span>Bookings</span>
                                <span class="ms-auto">
                                    <span class="right-icon">
                                        <i class="bi bi-chevron-down"></i>
                                    </span>
                                </span>
                            </a>
                            <div class="collapse" id="booking">
                                <ul class="navbar-nav ps-3">
                                    <li>
                                        <a href="/booking" class="nav-link px-3">
                                            <span class="me-2"
                                                  ><i class="bi bi-speedometer2"></i
                                                ></span>
                                            <span>Booking</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="nav-link px-3">
                                            <span class="me-2"
                                                  ><i class="bi bi-speedometer2"></i
                                                ></span>
                                            <span>Booking Info</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li>
                            <a href="/user_profile" class="nav-link px-3">
                                <span class="me-2"><i class="bi bi-book-fill"></i></span>
                                <span>Account</span>
                            </a>
                        </li>
                        <li>
                            <a href="/users" class="nav-link px-3">
                                <span class="me-2"><i class="bi bi-book-fill"></i></span>
                                <span>All Users</span>
                            </a>
                        </li>
                        <li class="my-4"><hr class="dropdown-divider bg-light" /></li>
                        <li>
                            <div class="text-muted small fw-bold text-uppercase px-3 mb-3">
                                Dedicated System
                            </div>
                        </li>
                        <li>
                            <a href="#" class="nav-link px-3">
                                <span class="me-2"><i class="bi bi-graph-up"></i></span>
                                <span>Messaging System</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link px-3">
                                <span class="me-2"><i class="bi bi-table"></i></span>
                                <span>Rating System</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <!-- offcanvas -->
        <main class="mt-5 pt-3">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <h4>Booking</h4>
                    </div>
                </div>
                <div class="row">

                        <div class="accordion" id="accordionExample">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        Book a house
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <form th:action="@{/addNewBooking}" method="post" th:object="${booking}" >
                                            <div class="form-group">
                                                <label for="check-in">Check In Date</label>
                                                <input type="date" class="form-control" id="check-in" th:field="*{start_date}"  required="required" autofocus="autofocus" />
                                            </div>
                                            <div class="form-group">
                                                <label for="check-out">Check Out Date</label>
                                                <input type="date" class="form-control" id="check-out" th:field="*{expiry_date}" required="required" autofocus="autofocus" />
                                            </div>
                                            <div class="form-group">
                                                <label for="estimated">Estimated Check In Time</label>
                                                <input type="time" class="form-control" id="estimated" th:field="*{estimated_check_in}"  required="required" autofocus="autofocus" />
                                            </div>
                                            <div class="pb-3">
                                                <br/>
                                            <center><button type="submit" class="btn btn-primary">Book</button></center>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        Reservation Policy | Services | Constraints
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <strong>This is the second item's accordion body.</strong> 
                                        It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. 
                                        These classes control the overall appearance, as well as the showing and hiding via CSS transitions. 
                                        You can modify any of this with custom CSS or overriding our default variables. 
                                        It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, 
                                        though the transition does limit overflow.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingThree">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        Rating/Reviews
                                    </button>
                                </h2>
                                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <strong>This is the third item's accordion body.</strong> 
                                        It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. 
                                        These classes control the overall appearance, as well as the showing and hiding via CSS transitions. 
                                        You can modify any of this with custom CSS or overriding our default variables. 
                                        It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, 
                                        though the transition does limit overflow.
                                    </div>
                                </div>
                            </div>
                        </div>
                     
               
                </div>

                <div class="row">
                    <div class="col-md-12 mb-3">
                        <div class="card">
                            <div class="card-header">
                                <span><i class="bi bi-table me-2"></i></span> Booking History
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <!-- <table
                                         id="example"
                                         class="table table-striped data-table"
                                         style="width: 100%"
                                         >
                                         <thead>
                                             <tr>
                                                 <th>Name</th>
                                                 <th>Location</th>
                                                 <th>Start date</th>
                                                 <th>End Date</th>
                                                 
                                             </tr>
                                         </thead>
                                         <tbody>
                                             <tr th:each="houses:${house}">
                                                 <td th:text="${houses.name}"></td>
                                                 <td th:text="${houses.location}"></td>
                                                 <td th:text="${houses.availability_start}"></td>
                                                 <td th:text="${houses.availability_end}"></td>
                                             </tr>
 
                                             </tfoot>
                                     </table>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.2/dist/chart.min.js"></script>
        <script src="../js/jquery-3.5.1.js"></script>
        <script src="../js/jquery.dataTables.min.js"></script>
        <script src="../js/dataTables.bootstrap5.min.js"></script>
        <script src="../js/script.js"></script>
    </body>
</html>

